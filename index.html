<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solitaire - Classic Card Game</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <script src="script.js" defer></script>
</head>

<body>
  <!-- Skip link for keyboard users -->
  <a href="#playing-cards" class="skip-link">Skip to game board</a>

  <div id="game-container">
    <header>
      <h1>Solitaire</h1>
      <div id="controls">
        <button id="new-game" aria-label="Start new game">New Game</button>
        <button id="undo" aria-label="Undo last move" aria-disabled="true">Undo</button>
        <div id="draw-mode">
          <label for="draw-select">Draw:</label>
          <select id="draw-select" aria-label="Select draw mode" aria-describedby="draw-mode-hint">
            <option value="1">Draw 1</option>
            <option value="3" selected>Draw 3</option>
          </select>
          <span id="draw-mode-hint" class="visually-hidden">Changing draw mode will restart the game</span>
        </div>
        <div id="timer" aria-live="off">Time: <span id="time">0:00</span></div>
        <div id="moves" aria-live="polite" aria-atomic="true">Moves: <span id="move-count">0</span></div>
      </div>
    </header>

    <main id="playing-cards" role="main" aria-label="Solitaire game board">
      <!-- Top Row: Stock/Waste and Foundations -->
      <div id="top-row">
        <div id="stock-waste">
          <div id="stock" class="pile" role="button" tabindex="0" aria-label="Stock pile - press Enter or Space to draw cards"></div>
          <div id="waste" class="pile" aria-label="Waste pile" aria-live="polite"></div>
        </div>

        <div id="foundations">
          <div class="foundation pile" data-suit="spades" aria-label="Spades foundation"></div>
          <div class="foundation pile" data-suit="hearts" aria-label="Hearts foundation"></div>
          <div class="foundation pile" data-suit="diamonds" aria-label="Diamonds foundation"></div>
          <div class="foundation pile" data-suit="clubs" aria-label="Clubs foundation"></div>
        </div>
      </div>

      <!-- Bottom Row: Tableau (7 columns) -->
      <div id="tableau">
        <div class="tableau-pile pile" data-pile="0" aria-label="Tableau pile 1"></div>
        <div class="tableau-pile pile" data-pile="1" aria-label="Tableau pile 2"></div>
        <div class="tableau-pile pile" data-pile="2" aria-label="Tableau pile 3"></div>
        <div class="tableau-pile pile" data-pile="3" aria-label="Tableau pile 4"></div>
        <div class="tableau-pile pile" data-pile="4" aria-label="Tableau pile 5"></div>
        <div class="tableau-pile pile" data-pile="5" aria-label="Tableau pile 6"></div>
        <div class="tableau-pile pile" data-pile="6" aria-label="Tableau pile 7"></div>
      </div>
    </main>

    <div id="win-message" role="alertdialog" aria-modal="true" aria-labelledby="win-title" style="display: none;">
      <h2 id="win-title">Congratulations! You Win!</h2>
      <button id="play-again">Play Again</button>
    </div>

    <!-- Unwinnable game message -->
    <div id="unwinnable-message" role="alertdialog" aria-modal="true" aria-labelledby="unwinnable-title" style="display: none;">
      <div class="modal-icon">⚠️</div>
      <h2 id="unwinnable-title">No Moves Available</h2>
      <p class="modal-description">This game appears to be unwinnable. No legal moves are available.</p>
      <div class="modal-buttons">
        <button id="new-game-unwinnable" class="primary-button">New Game</button>
        <button id="switch-to-draw1" class="primary-button" style="display: none;">Switch to Draw-1</button>
        <button id="continue-anyway" class="secondary-button">Continue Anyway</button>
      </div>
    </div>

    <!-- Modal backdrop overlay -->
    <div id="modal-backdrop" style="display: none;"></div>

    <!-- Hidden status announcer for screen readers -->
    <div id="status-announcer" role="status" aria-live="polite" aria-atomic="true" class="visually-hidden"></div>
  </div>
</body>

</html>